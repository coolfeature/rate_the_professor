

{% extends 'rate_the_professor/base.html' %}
{% load static %}

{% block body_block %}

    <!-- Search is AJAXed, suggested_professors div displays X number of results when typing,
    the clicking of the button all  -->
        <div class="well-sm">
			<form class="navbar-form "id="search_form" method="post" action="/rate_the_professor/suggest_professor/">
             {% csrf_token %}
                <input  type="text" class="form-control"   name="query" value="" id="query" placeholder="Search for a Professor"/>
                <button type="submit" class="btn btn-primary" name="submit" value="Search">Search</button>

					</form>

                    <!-- AJAX call updates this div  -->
                    <div id="suggested_professors"></div>
         </div>

	<!-- MOST RECENT RATINGS -->
	<div class="well well-lg" position="left" width=50% id="ratings-main">
		<h3>Recent Ratings</h3>
		{% if recent_ratings %}
		<table class="table">
			{% for rating in recent_ratings %}
			<tr>
				<!-- Images are resized according to css attributes -->
				<td class="comment-prof">
	               <!-- <img class="comment-pic" src="{% static 'img/profpic.png' %}"> -->
                    <a href="/rate_the_professor/professor/{{ rating.professor.id }}/">
                    <img class="comment-pic" src="/media/professors/{{ rating.professor.picture }}">
                    </a>
					<br>{{ rating.professor.full_name }}
				</td>
				<td>{{ rating.comment }}</td>
			</tr>
			<tr>
				<td class="rating">{{ rating.rating }}</td>
				<td>{{ rating.datetime }}</td>
			</tr>
			{% endfor %}
		</table>
		{% else %}
		<strong>There are no ratings present.</strong>
		{% endif %}
	</div>

	<!-- TOP 5 LECTURERS -->
	<div class="well well-sm">
		<h4>Top Professors</h4>
		{% if top_professors %}
		<table class="table">
			{% for professor in top_professors %}
			<!-- Mark them GREEN -->
			<tr>
				<!-- turned into a link to see if isauthenticated logic kicks in when visitng a professors page-->
				<td><a href="/rate_the_professor/professor/{{ professor.id }}/">{{ professor.full_name }}</a></td>
				<td>{{ professor.overall_rating }}</td>
			</tr>
			{% endfor %}
		</table>
		{% else %}
		<strong>There are no professors present.</strong>
		{% endif %}
	</div>

	<!-- BEST COMMUNICATORS -->
	<div class="well well-sm">
		<h4>Best communicators</h4>
		{% if best_communicators %}
		<table class="table">
			{% for professor in best_communicators %}
			<tr>
				<td><a href="/rate_the_professor/professor/{{ professor.id }}/">{{ professor.full_name }}</a></td>
				<td>{{ professor.overall_communication }}</td>
			</tr>
			{% endfor %}
		</table>
		{% else %}
		<strong>There are no professors present.</strong>
		{% endif %}
	</div>

    <!-- EASILY APPROACHABLE -->
	<div class="well well-sm">
		<h4>Most approachable</h4>
		{% if best_communicators %}
		<table class="table">
			{% for professor in easily_approachable %}
			<tr>
				<td><a href="/rate_the_professor/professor/{{ professor.id }}/">{{ professor.full_name }}</a></td>
				<td>{{ professor.overall_approachability }}</td>
			</tr>
			{% endfor %}
		</table>
		{% else %}
		<strong>There are no professors present.</strong>
		{% endif %}
	</div>

{% endblock %}
