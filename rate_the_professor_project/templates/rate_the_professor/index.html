{% extends 'rate_the_professor/base.html' %}
{% load static %}

{% block body_block %}

    <!-- Search is AJAXed, suggested_professors div displays X number of results when typing,
    the clicking of the button all  -->
    <div class="container-fluid">
       <p>Search for a professor</p>
       <form class="span8 form-search" id="search_form" method="post" action="/rate_the_professor/suggest_professor/">
          {% csrf_token %}
          <input type="text" class="input-long search-query"  name="query" value="" id="query" />
          <button type="submit" class="btn btn-success" name="submit" value="Search">Search</button>
        </form>
     </div>

    <!-- AJAX call updates this div  -->
    <div id="suggested_professors"></div>

	<!-- MOST RECENT RATINGS -->
	<div class="span5 offset1 well" id="ratings-main">
		<h3>Recent Ratings</h3>
		{% if recent_ratings %}
		<table class="table">
			{% for rating in recent_ratings %}
			<tr>
				<!-- Images are resized according to css attributes -->
				<td class="comment-prof">
	               <!-- <img class="comment-pic" src="{% static 'img/profpic.png' %}"> -->
                    <a href="/rate_the_professor/professor/{{ rating.professor.id }}/">
                    <img class="comment-pic" src="/media/professors/{{ rating.professor.picture }}">
                    </a>
					<br>{{ rating.professor.full_name }}
				</td>
				<td>{{ rating.comment }}</td>
			</tr>
			<tr>
				<td class="rating">{{ rating.rating }}</td>
				<td>{{ rating.datetime }}</td>
			</tr>
			{% endfor %}
		</table>
		{% else %}
		<strong>There are no ratings present.</strong>
		{% endif %}
	</div>

	<!-- TOP 5 LECTURERS -->
	<div class="span3 well">
		<h4>Top Professors</h4>
		{% if top_professors %}
		<table class="table">
			{% for professor in top_professors %}
			<!-- Mark them GREEN -->
			<tr>
				<!-- turned into a link to see if isauthenticated logic kicks in when visitng a professors page-->
				<td><a href="/rate_the_professor/professor/{{ professor.id }}/">{{ professor.full_name }}</a></td>
				<td>{{ professor.overall_rating }}</td>
			</tr>
			{% endfor %}
		</table>
		{% else %}
		<strong>There are no professors present.</strong>
		{% endif %}
	</div>

	<!-- BOTTOM 5 LECTURERS -->
	<div class="span3 well">
		<h4>Bottom 5 Professors</h4>
		{% if bottom_professors %}
		<table class="table">
			{% for professor in bottom_professors %}
			<tr>
				<!-- Mark them RED -->
				<td>{{ professor.full_name }}</td>
				<td>{{ professor.overall_rating }}</td>
			</tr>
			{% endfor %}
		</table>
		{% else %}
		<strong>There are no professors present.</strong>
		{% endif %}
	</div>
{% endblock %}