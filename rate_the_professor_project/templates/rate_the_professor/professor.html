{% extends 'rate_the_professor/base.html' %}
{% load static %}

{% block body_block %}
<div class="row">
    {% if professor %}
    <!-- PROFESSOR PANEL -->
    <div class="col-md-3 panel panel-default">
        <div class="panel-heading">
            <h3>{{ professor.first_name }} {{ professor.last_name }}</h3>
            <h4 class="big-text">{{ professor.university }}</h4>
        </div>

        <div class="panel-body">
            <div class="row">
                <div class="col-md-12 profpic">
                    {% if professor.picture %}
                        <img src="/media/professors/{{ professor.picture }}">
                    {% else %}
                        <img src="{% static 'img/profpic.png' %}">
                    {% endif %}
                </div>
            </div>
            
            <table>
                <tr>
                    <td class="big-rating">{{ professor.overall_rating }}</td>
                    <td><h1 class="centered-text">{{ professor.overall_rating }}<h1></td>
                </tr>
                <tr><td class="prof-rating">Communication: </td><td class="big-rating">{{ professor.overall_communication }}</td></tr>
                <tr><td class="prof-rating">Knowledge: </td><td class="big-rating">{{ professor.overall_knowledge }}</td></tr>
                <tr><td class="prof-rating">Approachability: </td><td class="big-rating">{{ professor.overall_approachability }}</td></tr>
                <tr><td class="prof-rating">Enthusiasm: </td><td class="big-rating">{{ professor.overall_enthusiasm }}</td></tr>
                <tr><td class="prof-rating">Clarity: </td><td class="big-rating">{{ professor.overall_clarity }}</td></tr>
                <tr><td class="prof-rating">Awesomeness: </td><td class="big-rating">{{ professor.overall_awesomeness }}</td></tr>
            </table>

            <div>
            {% if courses_taught %}
                <br>Courses taught:
                {% for course in courses_taught %}
                    <br>{{ course }}
                {% endfor %}
            {% endif %}
            </div>
        </div>
    </div>

    <div class="col-md-8 col-md-offset-1">
        <!-- PROFESSOR DETAILS -->
        <div class="row">
            <div class="col-md-12 well">
                <!-- SUBMIT RATING -->
                {% if user.is_authenticated %}
                     <h3>Submit Your Rating!</h3>
                     <form id="rating_form" method="post" action="/rate_the_professor/professor/{{ professor.id }}/">
                        {% csrf_token %}
                        {% for hidden in form.hidden_fields %}
                            {{ hidden }}
                        {% endfor %}

                        <div class="prof-rating-form">
                            <table>
                            {% for field in form.visible_fields %}
                            <tr>
                                <td class="prof-rating">{{ field.help_text}}</td>
                                <td>{{ field }} </td>
                                <td>{{ field.errors }}</td>
                            </tr>
                            {% endfor %}
                            </table>
                        </div>
                        <input type="submit" name="submit" value="Create Rating" />
                    </form>
                {% else %}
                     <strong>Log In to leave comments</strong>
                {% endif %}
            </div>
        </div>
    
        <!-- RECENT RATINGS -->
        <div class="row">
            <div class="col-md-12 well">

                <!-- RECENT RATINGS HEADER ROW -->
                <div class="row">
                    <div class="col-md-12">
                        <h3>Recent Ratings</h3>
                    </div>
                </div>

                <!-- RATING COMMENTS ROWS -->
                {% if ratings %}
                    {% for rating in ratings %}
                        <hr>
                        <div class="row">
                            <!-- RATING COMMENT -->
                            <div class="col-md-6">
                                <div>{{ rating.comment }}</div>
                                <div class="small-rating">{{ rating.rating }}</div> <div class="date">{{ rating.datetime }}</div>
                            </div>
                            <!-- RATING STARS -->
                            <div class="col-md-3">
                                <table>
                                    <tr><td class="prof-rating-type-small">Communication: </td><td><div class="small-rating">{{ rating.communication }}</div></td></tr>
                                    <tr><td class="prof-rating-type-small">Knowledge: </td><td><div class="small-rating">{{ rating.knowledge }}</div></td></tr>
                                    <tr><td class="prof-rating-type-small">Approachability: </td><td><div class="small-rating">{{ rating.approachability }}</div></td></tr>
                                </table>
                            </div>
                            <div class="col-md-3">
                                <table>
                                    <tr><td class="prof-rating-type-small">Enthusiasm: </td><td><div class="small-rating">{{ rating.enthusiasm }}</div></td></tr>
                                    <tr><td class="prof-rating-type-small">Clarity: </td><td><div class="small-rating">{{ rating.clarity }}</div></td></tr>
                                    <tr><td class="prof-rating-type-small">Awesomeness: </td><td><div class="small-rating">{{ rating.awesomeness }}</div></td></tr>
                                </table>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <strong>No ratings currently for professor</strong>
                {% endif %}
            </div>
        </div>
    </div>

    {% else %}
        <div class="col-md-12">
            <h2>The specified professor {{ professor }} does not exist!</h2>
        <h3><a href="/rate_the_professor/suggestion/">Suggest a professor</a></h3>
        </div>
    {% endif %}

</div>
{% endblock %}