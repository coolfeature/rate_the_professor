{% extends 'rate_the_professor/base.html' %}
{% load static %}

{% block body_block %}
    {% if professor %}

        <!-- PROFESSOR DETAILS -->
        <div class="span5 offset1 well">

            <!-- PROFESSOR PICTURE -->
            <div class="profpic">
                <img src="/media/professors/{{ professor.picture }}">
            </div>

            <!-- PROFESSOR DETAILS -->
            <div class="profinfo">
                <table>
                    <tr><td>{{ professor.first_name }} {{ professor.last_name }}</td></tr>
                    <tr><td>{{ professor.university }}</td></tr>
                    <tr><td><!-- Courses taught in here!! --></td></tr>
                    <tr><td>Rating: {{ professor.overall_rating }}</td></tr>
                    {% if courses_taught %}
                        <tr><td>Courses taught:</td></tr>
                        {% for course in courses_taught %}
                            <tr><td>{{ course }}</td></tr>
                        {% endfor %}
                    {% endif %}
                </table>
            </div>

        </div>

        <!-- PROFESSOR RATINGS DETAILS -->
        <div class="span3 well">
            <h4>Professor Ratings!</h4>
            <table>
                <tr><td>Communication: {{ professor.overall_communication }}</td></tr>
                <tr><td>Knowledge: {{ professor.overall_knowledge }}</td></tr>
                <tr><td>Approachability: {{ professor.overall_approachability }}</td></tr>
                <tr><td>Enthusiasm: {{ professor.overall_enthusiasm }}</td></tr>
                <tr><td>Clarity: {{ professor.overall_clarity }}</td></tr>
                <tr><td>Awesomeness: {{ professor.overall_awesomeness }}</td></tr>
            </table>

            <!-- FURTHER COMMENTS -->
            {% if user.is_authenticated %}
                 <strong>Submit Your Rating!</strong>
                 <form id="rating_form" method="post" action="/rate_the_professor/professor/{{ professor.id }}/">
                    {% csrf_token %}
                    {% for hidden in form.hidden_fields %}
                        {{ hidden }}
                    {% endfor %}

                    <div class="prof-rating-form">
                        {% for field in form.visible_fields %}
                            {{ field.errors }}
                            {{ field.help_text}}
                            {{ field }}
                        {% endfor %}
                    </div>
                    <input type="submit" name="submit" value="Create Rating" />
                </form>
            {% else %}
                 <strong>Log In to leave comments</strong>
            {% endif %}
        </div>
        
        <!-- RECENT RATINGS -->
        <div class="span5 offset1 well">
            <h4>Recent Ratings</h4>
            {% if ratings %}
                <ul>
                    {% for rating in ratings %}
                    <li>{{ rating.comment }}</li>
                    {% endfor %}
                </ul>
            {% else %}
                <strong>No ratings currently for professor</strong>
            {% endif %}
        </div>

    {% else %}
        The specified professor {{ professor }} does not exist!
    {% endif %}

{% endblock %}