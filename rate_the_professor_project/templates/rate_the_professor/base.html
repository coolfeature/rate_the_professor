{% load static %}
<!DOCTYPE html>
<html>
<head>
	<title>Rate The Professor</title>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Bootstrap -->
	<!--link href="{% static 'css/bootstrap-fluid-adj.css' %}" rel="stylesheet"-->
    <link href="{% static 'js/jquery-2.1.0.min.js' %}" type="text/javascript">
	<link href="{% static 'css/bootstrap-responsive.css' %}" rel="stylesheet">
	<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" media="screen">

	<link rel="shortcut icon" href="/img/favicon.ico">

	<!-- CSS is written here for convenience; will move to a separate .css file when complete -->
	<style type="text/css">
	.navbardiv {
		background: url({% static 'img/banner.jpg' %});
		margin-bottom: 50px;
	}
	.logo {
		width: 200px;
	}
	.profpic {
		float: left;
	}
	.profpic img {
		border: 3px solid;
	}
	.profinfo {
		margin-left: 120px;
	}
	.errorlist {
		float: right;
	}
	table.formtable th {
		text-align: left;
		width: 150px;
	}
	footer {
		margin-top: 50px;
	}
	</style>
</head>

<body>
	<div class="container">

		<!-- NAVIGATION BAR -->
		<div class="navbardiv row-fluid">
			<!-- RATE THE PROFESSOR LOGO -->
			<div class="span3">
				<a href="/rate_the_professor/"><img src="{% static 'img/logo.png' %}" class="logo"></a>			
			</div>


			{% if user.is_authenticated %}
			<!-- LOGOUT BUTTON -->
			<div class="pull-right">
				<form action="/rate_the_professor/logout/">
				    <button type="submit" value="Logout" class="btn btn-primary">Logout</button>
				</form>
			</div>
			{% else %}
			<!-- REGISTER BUTTON -->
			<div class="pull-right">
				<form action="/rate_the_professor/register/">
					<button type="submit" class="btn btn-primary">Register</button>
				</form>
			</div>
			<!-- USERNAME/PASSWORD INPUT FIELDS -->
			<div class="pull-right">
				<form class="form-inline" id="login_form" method="post" action="/rate_the_professor/login/">
					{% csrf_token %}
					<input class="input-small" input size="50" value="" id="id_username" name="username" placeholder="Username" type="text"/>
					<input class="input-small" size="50" value="" id="id_password" name="password" placeholder="Password" type="password" />
					<button type="submit" class="btn btn-primary">Sign in</button>
                    <div id="login_result_div"></div>
				</form>
			</div>

			{% endif %}
		</div>

        <div class="container-fluid">
            <p>Search for a professor</p>
            <form class="span8 form-search" id="search_form" method="post" action="/rate_the_professor/professor/{{ professor_name }}/">
                 {% csrf_token %}
                <input type="text" class="input-long search-query"  name="query" value="{{ professor_name }}" id="query" />
                <button type="submit" class="btn btn-success" name="submit" value="Search">Search</button>
             </form>
        </div>

        <div id="suggested_professors">

        </div>
		<!-- CONTENT OF PAGE -->
        <div>
            {% block body_block %}{% endblock %}
        </div>

	</div>

	<footer>
		<div class="container">
			<p>&copy; iTech4Leif 2014</p>
		</div>
	</footer>

	<script src="{% static 'js/jquery-2.1.0.min.js' %}"></script>
	<script src="{% static 'js/bootstrap.min.js' %}"></script>
	<script type="text/javascript">
    $(document).ready(function(){
        //$("#id_username").attr('placeholder', 'Username');
        //$("#id_email").attr('placeholder', 'Email');
        //$("#id_password").attr('placeholder', 'Password');
    });
	</script>

   <script type="text/javascript">
    var frm = $('#login_form');
    frm.submit(function () {
        $.ajax({
            type: "POST",
            url: "/rate_the_professor/login/",
            data: frm.serialize(),
            success: function (data) {
                window.location = data;
            },
            error: function(data) {
                $('#login_result_div').html("<font color='red'>Invalid login details supplied.</font>");
            }
        });
        return false;
    });


    $('#search_form').keyup(function(){
        var query;
        query = $('#query').val();
        if (query !== "") {
        $.get('/rate_the_professor/suggest_professor/', {suggestion: query}, function(data){
            $('#suggested_professors').html(data);
        });
        } else {
            $('#suggested_professors').html("");
        }
});
</script>
</body>
</html>